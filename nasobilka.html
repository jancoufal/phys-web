<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nasobilka</title>
    <style>
        body {
            font-family: monospace;
            font-size: 120%;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }
        .controls {
            margin-bottom: 20px;
        }
        select, button {
            margin-right: 10px;
        }
        .ex-index {
            color: lightgray;
        }
        #exercises {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
        }
        #exercises div {
            margin-bottom: 0;
        }
        .placeholder {
            font-size: 110%;
            font-family: monospace;
        }
        .answer {
            display: none;
            font-size: 110%;
            font-family: monospace;
        }
        @media (max-width: 600px) {
            body {
                padding: 10px;
            }
            #exercises {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="controls">
        <label>Max X: 
            <select id="maxX">
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5</option>
                <option value="6">6</option>
                <option value="7">7</option>
                <option value="8">8</option>
                <option value="9">9</option>
                <option value="10" selected>10</option>
            </select>
        </label>
        <label>Max Y: 
            <select id="maxY">
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5</option>
                <option value="6">6</option>
                <option value="7">7</option>
                <option value="8">8</option>
                <option value="9">9</option>
                <option value="10" selected>10</option>
            </select>
        </label>
        <button onclick="generateExercises()">Generuj</button>
        <button id="toggleButton" onclick="toggleAnswers()">Zobraz odpovědi</button>
    </div>
    <div id="exercises"></div>

    <script>
        function generateExercises() {
            const maxX = parseInt(document.getElementById('maxX').value);
            const maxY = parseInt(document.getElementById('maxY').value);
            let exercises = [];

            // Helper to generate all possible unique pairs for mult or div
            function getUniqueExercises(type, count) {
                let possibles = [];
                for (let a = 1; a <= maxX; a++) {
                    for (let b = 1; b <= maxY; b++) {
                        let q, ans;
                        if (type === 'mult') {
                            q = `${a} x ${b} = `;
                            ans = a * b;
                        } else {
                            const product = a * b;
                            q = `${product} : ${b} = `;
                            ans = a;
                        }
                        possibles.push({ q, ans });
                    }
                }
                // Shuffle possibles
                for (let i = possibles.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [possibles[i], possibles[j]] = [possibles[j], possibles[i]];
                }
                // If enough uniques, take first 'count'
                if (possibles.length >= count) {
                    return possibles.slice(0, count);
                } else {
                    // Otherwise, take all and duplicate randomly to fill
                    let result = [...possibles];
                    while (result.length < count) {
                        const randomIdx = Math.floor(Math.random() * possibles.length);
                        result.push(possibles[randomIdx]);
                    }
                    return result;
                }
            }

            // Get 8 mult and 8 div
            const multExercises = getUniqueExercises('mult', 8);
            const divExercises = getUniqueExercises('div', 8);
            exercises = [...multExercises, ...divExercises];

            // Fisher-Yates shuffle combined
            for (let i = exercises.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [exercises[i], exercises[j]] = [exercises[j], exercises[i]];
            }

            // Build HTML
            let html = '';
            exercises.forEach((ex, idx) => {
                html += `<div><b class="ex-index">${idx + 1}.</b> ${ex.q} <span class="placeholder" id="placeholder${idx}">?</span><span class="answer" id="ans${idx}">${ex.ans}</span></div>`;
            });

            document.getElementById('exercises').innerHTML = html;
            document.getElementById('toggleButton').textContent = 'Zobraz odpovědi';
        }
        function toggleAnswers() {
            const answers = document.querySelectorAll('.answer');
            const placeholders = document.querySelectorAll('.placeholder');
            const button = document.getElementById('toggleButton');
            if (answers.length > 0 && (answers[0].style.display === 'none' || answers[0].style.display === '')) {
                answers.forEach(ans => ans.style.display = 'inline');
                placeholders.forEach(pl => pl.style.display = 'none');
                button.textContent = 'Schovej odpovědi';
            } else {
                answers.forEach(ans => ans.style.display = 'none');
                placeholders.forEach(pl => pl.style.display = 'inline');
                button.textContent = 'Zobraz odpovědi';
            }
        }

        generateExercises();
    </script>
</body>
</html>
